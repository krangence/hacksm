---
  apiVersion: helm.fluxcd.io/v1
  kind: HelmRelease
  metadata:
    name: minio
    namespace: minio
  spec:
    releaseName: minio
    helmVersion: v3
    chart:
      repository: https://helm.min.io/
      name: minio
      version: 7.1.2
    valuesFrom:
      - secretKeyRef:
          name: minio-helm-values
    values:
      persistence:
        size: 80Gi
        storageClass: hcloud-volumes
      ingress:
        enabled: true
        annotations:
          kubernetes.io/ingress.class: nginx
        hosts: [minio.hacksm.net]
      securityContext:
        enabled: false
      nasgateway:
        enabled: true
        # Number of parallel instances
        replicas: 1
